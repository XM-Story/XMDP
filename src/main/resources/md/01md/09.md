说到单体下保证一人一单只需要加锁就可以了,但是如果是在集群下的应用,就锁不住了
我们考虑使用分布式锁，也就是redis，但是redis的set nx 锁需要考虑到锁的续期和锁的删除等,
想到这里就想到了redission看门狗机制
还有就是lua脚本实现。

下面实现redis分布式锁的初级版本，定义一个类去实现一个锁接口完成基本操作
但是这里没有考虑到业务逻辑过长，锁ttl太短导致业务没有处理完锁释放了，导致第二个线程抢到锁，然后第一个线程又把第二个线程的锁删除了的业务问题